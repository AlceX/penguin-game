{
	"name": "eGame",
	"events": [
		{
			"eventType": "variable",
			"name": "DEBUG",
			"type": "boolean",
			"initialValue": "false",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 493997611043259
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-start-of-layout",
					"objectClass": "System",
					"sid": 865775021372488
				}
			],
			"actions": [
				{
					"id": "destroy",
					"objectClass": "spr_rock",
					"sid": 143623325220483
				},
				{
					"id": "destroy",
					"objectClass": "spr_snow_clump",
					"sid": 377183883736215
				},
				{
					"id": "destroy",
					"objectClass": "spr_speed_up",
					"sid": 207668939130927
				}
			],
			"sid": 481189631946613,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for",
							"objectClass": "System",
							"sid": 954389431490738,
							"parameters": {
								"name": "\"\"",
								"start-index": "1",
								"end-index": "200"
							}
						}
					],
					"actions": [
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 695810282057194,
							"parameters": {
								"object-to-create": "spr_rock",
								"layer": "0",
								"x": "0",
								"y": "0"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "spr_rock",
							"sid": 765189065962377,
							"parameters": {
								"instance-variable": "world_x",
								"value": "-500"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "spr_rock",
							"sid": 578311488811017,
							"parameters": {
								"instance-variable": "world_z",
								"value": "400 * loopindex"
							}
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 408359136162239,
							"parameters": {
								"object-to-create": "spr_rock",
								"layer": "0",
								"x": "0",
								"y": "0"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "spr_rock",
							"sid": 218117546954098,
							"parameters": {
								"instance-variable": "world_x",
								"value": "500"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "spr_rock",
							"sid": 492253085520674,
							"parameters": {
								"instance-variable": "world_z",
								"value": "400 * loopindex"
							}
						}
					],
					"sid": 389453438641411
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for",
							"objectClass": "System",
							"sid": 762409111507097,
							"parameters": {
								"name": "\"\"",
								"start-index": "1",
								"end-index": "40"
							}
						}
					],
					"actions": [
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 576996435940979,
							"parameters": {
								"object-to-create": "spr_snow_clump",
								"layer": "0",
								"x": "0",
								"y": "0"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "spr_snow_clump",
							"sid": 623847816289957,
							"parameters": {
								"instance-variable": "world_x",
								"value": "random(-200, 200)"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "spr_snow_clump",
							"sid": 514716629067310,
							"parameters": {
								"instance-variable": "world_z",
								"value": "loopindex * 2000"
							}
						}
					],
					"sid": 467592250811995
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for",
							"objectClass": "System",
							"sid": 442434006925181,
							"parameters": {
								"name": "\"\"",
								"start-index": "1",
								"end-index": "20"
							}
						}
					],
					"actions": [
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 827689142989383,
							"parameters": {
								"object-to-create": "spr_speed_up",
								"layer": "0",
								"x": "0",
								"y": "0"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "spr_speed_up",
							"sid": 604287694629155,
							"parameters": {
								"instance-variable": "world_x",
								"value": "random(-200, 200)"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "spr_speed_up",
							"sid": 817023703387927,
							"parameters": {
								"instance-variable": "world_z",
								"value": "loopindex * 4000 - 1000"
							}
						}
					],
					"sid": 802459836374214
				},
				{
					"eventType": "block",
					"conditions": [],
					"actions": [
						{
							"id": "set-collisions-enabled",
							"objectClass": "spr_rock",
							"sid": 315119117238612,
							"parameters": {
								"collisions": "disabled"
							}
						}
					],
					"sid": 825285776526955
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "every-tick",
					"objectClass": "System",
					"sid": 426593397098206
				}
			],
			"actions": [
				{
					"id": "set-text",
					"objectClass": "Text",
					"sid": 654833050849617,
					"parameters": {
						"text": "round(time) & \" \" & round(spr_player.speed_z)"
					}
				}
			],
			"sid": 726987115590419
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Debug",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 514333752028410,
							"parameters": {
								"key": 32
							}
						}
					],
					"actions": [
						{
							"id": "toggle-boolean-eventvar",
							"objectClass": "System",
							"sid": 124310732588732,
							"parameters": {
								"variable": "DEBUG"
							}
						}
					],
					"sid": 183657022663257
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 925108822958760,
							"parameters": {
								"variable": "DEBUG"
							}
						}
					],
					"actions": [],
					"sid": 617931273178960,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 125512602776532,
									"parameters": {
										"key": 87
									}
								}
							],
							"actions": [
								{
									"id": "add-to-instvar",
									"objectClass": "obj_camera",
									"sid": 341434398032431,
									"parameters": {
										"instance-variable": "world_z",
										"value": "spr_player.speed_z * dt"
									}
								}
							],
							"sid": 378613169431615
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 697599215237014,
									"parameters": {
										"key": 83
									}
								}
							],
							"actions": [
								{
									"id": "subtract-from-instvar",
									"objectClass": "obj_camera",
									"sid": 117848821393176,
									"parameters": {
										"instance-variable": "world_z",
										"value": "spr_player.speed_z * dt"
									}
								}
							],
							"sid": 289707060934482
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 672146114111068,
									"parameters": {
										"key": 68
									}
								}
							],
							"actions": [
								{
									"id": "add-to-instvar",
									"objectClass": "obj_camera",
									"sid": 642734155985728,
									"parameters": {
										"instance-variable": "world_x",
										"value": "spr_player.max_speed_x * dt"
									}
								}
							],
							"sid": 730134826913802
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 178094048051662,
									"parameters": {
										"key": 65
									}
								}
							],
							"actions": [
								{
									"id": "subtract-from-instvar",
									"objectClass": "obj_camera",
									"sid": 989079572730441,
									"parameters": {
										"instance-variable": "world_x",
										"value": "spr_player.max_speed_x * dt"
									}
								}
							],
							"sid": 163783611832125
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 750023646850255,
									"parameters": {
										"key": 69
									}
								}
							],
							"actions": [
								{
									"id": "add-to-instvar",
									"objectClass": "obj_camera",
									"sid": 499563541774169,
									"parameters": {
										"instance-variable": "world_y",
										"value": "spr_player.max_speed_x * dt"
									}
								}
							],
							"sid": 660866455996370
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 919437339477235,
									"parameters": {
										"key": 81
									}
								}
							],
							"actions": [
								{
									"id": "subtract-from-instvar",
									"objectClass": "obj_camera",
									"sid": 925525680819017,
									"parameters": {
										"instance-variable": "world_y",
										"value": "spr_player.max_speed_x * dt"
									}
								}
							],
							"sid": 421505935065400
						}
					]
				}
			],
			"sid": 547026419656678
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Camera",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 257026240335298
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "obj_camera",
							"sid": 307551834408981,
							"parameters": {
								"instance-variable": "depth",
								"value": "(LayoutWidth / 2) / tan(Self.fov / 2)"
							}
						}
					],
					"sid": 499345458059067
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 780742799611585,
							"parameters": {
								"variable": "DEBUG"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "obj_camera",
							"sid": 782464400235112,
							"parameters": {
								"instance-variable": "world_z",
								"value": "spr_player.world_z - spr_player.follow_distance"
							}
						}
					],
					"sid": 719943890785587
				}
			],
			"sid": 785579837485412
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Movement",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 690550458011206
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "spr_player",
							"sid": 699397706521938,
							"parameters": {
								"instance-variable": "world_x",
								"value": "clamp(Self.world_x + Self.speed_x * dt, -230, 230)"
							}
						},
						{
							"id": "add-to-instvar",
							"objectClass": "spr_player",
							"sid": 608379577015979,
							"parameters": {
								"instance-variable": "world_z",
								"value": "Self.speed_z * dt"
							}
						}
					],
					"sid": 262056601912473
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "mouse-button-is-down",
							"objectClass": "Mouse",
							"sid": 830779027712538,
							"parameters": {
								"mouse-button": "left"
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "spr_player",
							"sid": 693956703792184,
							"parameters": {
								"instance-variable": "speed_x",
								"value": "clamp(Self.speed_x - Self.acceleration_x * dt, -Self.max_speed_x, Self.max_speed_x)"
							}
						}
					],
					"sid": 217472534183099
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "mouse-button-is-down",
							"objectClass": "Mouse",
							"sid": 246432843066027,
							"parameters": {
								"mouse-button": "right"
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "spr_player",
							"sid": 181452574170932,
							"parameters": {
								"instance-variable": "speed_x",
								"value": "clamp(Self.speed_x + Self.acceleration_x * dt, -Self.max_speed_x, Self.max_speed_x)"
							}
						}
					],
					"sid": 814021065432035
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "mouse-button-is-down",
							"objectClass": "Mouse",
							"sid": 567653631254164,
							"parameters": {
								"mouse-button": "left"
							},
							"isInverted": true
						},
						{
							"id": "mouse-button-is-down",
							"objectClass": "Mouse",
							"sid": 304355919830375,
							"parameters": {
								"mouse-button": "right"
							},
							"isInverted": true
						}
					],
					"actions": [],
					"sid": 286749439622309,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "spr_player",
									"sid": 330738075449111,
									"parameters": {
										"instance-variable": "speed_x",
										"comparison": 2,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "spr_player",
									"sid": 979644786814118,
									"parameters": {
										"instance-variable": "speed_x",
										"value": "clamp(Self.speed_x + Self.deacceleration_x * dt, -Infinity, 0)"
									}
								}
							],
							"sid": 131171169467392
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "spr_player",
									"sid": 715759326388267,
									"parameters": {
										"instance-variable": "speed_x",
										"comparison": 4,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "spr_player",
									"sid": 508164262592106,
									"parameters": {
										"instance-variable": "speed_x",
										"value": "clamp(Self.speed_x - Self.deacceleration_x * dt, 0, Infinity)"
									}
								}
							],
							"sid": 326892038973850
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-function",
							"objectClass": "Function",
							"sid": 493386875176743,
							"parameters": {
								"name": "\"speed_up_player\""
							}
						}
					],
					"actions": [
						{
							"id": "stop-all-tweens",
							"objectClass": "spr_player",
							"sid": 897037746368674,
							"behaviorType": "Tween"
						},
						{
							"id": "tween-value",
							"objectClass": "spr_player",
							"sid": 579750990661396,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"switch_speed\"",
								"start-value": "Self.speed_z",
								"end-value": "Self.speed_z + Self.speed_z_step",
								"time": "1",
								"ease": "easeoutquart",
								"destroy-on-complete": "no"
							}
						}
					],
					"sid": 810216678429398
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-function",
							"objectClass": "Function",
							"sid": 216748191132992,
							"parameters": {
								"name": "\"slow_down_player\""
							}
						}
					],
					"actions": [
						{
							"id": "stop-all-tweens",
							"objectClass": "spr_player",
							"sid": 174980487463112,
							"behaviorType": "Tween"
						},
						{
							"id": "tween-value",
							"objectClass": "spr_player",
							"sid": 254707278646985,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"switch_speed\"",
								"start-value": "Self.speed_z",
								"end-value": "Self.speed_z - Self.speed_z_step",
								"time": "1",
								"ease": "easeoutquart",
								"destroy-on-complete": "no"
							}
						}
					],
					"sid": 615459224656259
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-playing",
							"objectClass": "spr_player",
							"sid": 278541936683833,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"switch_speed\""
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "spr_player",
							"sid": 960662438521039,
							"parameters": {
								"instance-variable": "speed_z",
								"value": "clamp(Self.Tween.Value(\"switch_speed\"), Self.min_speed_z, Self.max_speed_z)"
							}
						}
					],
					"sid": 588549415162752
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "spr_player",
							"sid": 251706478296751,
							"parameters": {
								"instance-variable": "speed_z",
								"comparison": 2,
								"value": "1000"
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "spr_player",
							"sid": 301608061002376,
							"parameters": {
								"instance-variable": "speed_z",
								"value": "clamp(Self.speed_z + Self.acceleration_z * dt, Self.min_speed_z, Self.max_speed_z)"
							}
						}
					],
					"sid": 523872290089617
				}
			],
			"sid": 894601917282731
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Collision",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Simple? Yeah! But it works if you choose the collision polygons carefully."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "spr_player",
							"sid": 736804656810308,
							"parameters": {
								"object": "spr_speed_up"
							}
						}
					],
					"actions": [
						{
							"id": "call-function",
							"objectClass": "Function",
							"sid": 961252187958541,
							"parameters": {
								"name": "\"speed_up_player\"",
								"parameter-n": []
							}
						},
						{
							"id": "destroy",
							"objectClass": "spr_speed_up",
							"sid": 952643188545717
						}
					],
					"sid": 899176958803248
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "spr_player",
							"sid": 268517942092780,
							"parameters": {
								"object": "spr_snow_clump"
							}
						}
					],
					"actions": [
						{
							"id": "call-function",
							"objectClass": "Function",
							"sid": 909563187754637,
							"parameters": {
								"name": "\"slow_down_player\"",
								"parameter-n": []
							}
						},
						{
							"id": "destroy",
							"objectClass": "spr_snow_clump",
							"sid": 286232845244069
						}
					],
					"sid": 585316258469978
				}
			],
			"sid": 682766657600568
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Rendering",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each-ordered",
							"objectClass": "System",
							"sid": 287315168325427,
							"parameters": {
								"object": "Renderable",
								"expression": "Renderable.world_z",
								"order": "ascending"
							}
						}
					],
					"actions": [],
					"sid": 556784881542460,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Renderable",
									"sid": 737662577824629,
									"parameters": {
										"instance-variable": "world_z",
										"comparison": 4,
										"value": "obj_camera.world_z"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Renderable",
									"sid": 343224912603626,
									"parameters": {
										"instance-variable": "world_z",
										"comparison": 2,
										"value": "obj_camera.world_z + obj_camera.draw_distance"
									}
								}
							],
							"actions": [
								{
									"id": "call-function",
									"objectClass": "Function",
									"sid": 867868013665467,
									"parameters": {
										"name": "\"project\"",
										"parameter-n": [
											"Renderable.UID"
										]
									}
								},
								{
									"id": "set-position",
									"objectClass": "Renderable",
									"sid": 536936576356473,
									"parameters": {
										"x": "Self.screen_x",
										"y": "Self.screen_y"
									}
								},
								{
									"id": "set-scale",
									"objectClass": "Renderable",
									"sid": 395901606262067,
									"parameters": {
										"scale": "Self.scale"
									}
								},
								{
									"id": "move-to-bottom",
									"objectClass": "Renderable",
									"sid": 376690594488318
								}
							],
							"sid": 800870470623616
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 888137354916502
								}
							],
							"actions": [
								{
									"id": "set-scale",
									"objectClass": "Renderable",
									"sid": 372811864523282,
									"parameters": {
										"scale": "0"
									}
								}
							],
							"sid": 724867963825616
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-function",
							"objectClass": "Function",
							"sid": 556779447256853,
							"parameters": {
								"name": "\"project\""
							}
						}
					],
					"actions": [],
					"sid": 842692987487795,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-unique-id",
									"objectClass": "Renderable",
									"sid": 110878112501271,
									"parameters": {
										"unique-id": "Function.Param(0)"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "Renderable",
									"sid": 253567769531493,
									"parameters": {
										"instance-variable": "transformed_x",
										"value": "Self.world_x - obj_camera.world_x"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Renderable",
									"sid": 550062614227476,
									"parameters": {
										"instance-variable": "transformed_y",
										"value": "Self.world_y - obj_camera.world_y"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Renderable",
									"sid": 215011680097976,
									"parameters": {
										"instance-variable": "transformed_z",
										"value": "Self.world_z - obj_camera.world_z"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Renderable",
									"sid": 989723673550606,
									"parameters": {
										"instance-variable": "scale",
										"value": "obj_camera.depth / Self.transformed_z"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Renderable",
									"sid": 261854380988092,
									"parameters": {
										"instance-variable": "screen_x",
										"value": "LayoutWidth / 2 + Self.transformed_x * Self.scale"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Renderable",
									"sid": 610534001163447,
									"parameters": {
										"instance-variable": "screen_y",
										"value": "LayoutHeight / 2 + Self.transformed_y * Self.scale"
									}
								}
							],
							"sid": 526269106812037
						}
					]
				}
			],
			"sid": 853253740197104
		}
	],
	"sid": 160995284179888
}