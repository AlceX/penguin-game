{
	"name": "eGame",
	"events": [
		{
			"eventType": "variable",
			"name": "DEBUG",
			"type": "boolean",
			"initialValue": "false",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 493997611043259
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-start-of-layout",
					"objectClass": "System",
					"sid": 865775021372488
				}
			],
			"actions": [
				{
					"id": "destroy",
					"objectClass": "spr_rock",
					"sid": 143623325220483
				},
				{
					"id": "set-instvar-value",
					"objectClass": "obj_camera",
					"sid": 890693548946505,
					"parameters": {
						"instance-variable": "depth",
						"value": "(LayoutWidth / 2) / tan(Self.fov / 2)"
					}
				}
			],
			"sid": 481189631946613,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for",
							"objectClass": "System",
							"sid": 861903088800972,
							"parameters": {
								"name": "\"\"",
								"start-index": "1",
								"end-index": "100"
							}
						}
					],
					"actions": [
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 695810282057194,
							"parameters": {
								"object-to-create": "spr_rock",
								"layer": "0",
								"x": "0",
								"y": "0"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "spr_rock",
							"sid": 765189065962377,
							"parameters": {
								"instance-variable": "world_x",
								"value": "-500"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "spr_rock",
							"sid": 851199804511111,
							"parameters": {
								"instance-variable": "world_z",
								"value": "200 * loopindex"
							}
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 408359136162239,
							"parameters": {
								"object-to-create": "spr_rock",
								"layer": "0",
								"x": "0",
								"y": "0"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "spr_rock",
							"sid": 218117546954098,
							"parameters": {
								"instance-variable": "world_x",
								"value": "500"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "spr_rock",
							"sid": 645094629148484,
							"parameters": {
								"instance-variable": "world_z",
								"value": "200 * loopindex"
							}
						}
					],
					"sid": 389453438641411
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-key-pressed",
					"objectClass": "Keyboard",
					"sid": 368408592824353,
					"parameters": {
						"key": 32
					}
				}
			],
			"actions": [
				{
					"id": "toggle-boolean-eventvar",
					"objectClass": "System",
					"sid": 866573104119220,
					"parameters": {
						"variable": "DEBUG"
					}
				}
			],
			"sid": 780629156760950
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "compare-boolean-eventvar",
					"objectClass": "System",
					"sid": 287496504143594,
					"parameters": {
						"variable": "DEBUG"
					}
				}
			],
			"actions": [],
			"sid": 934515811884637,
			"children": [
				{
					"eventType": "variable",
					"name": "CAMERA_SPEED",
					"type": "number",
					"initialValue": "500",
					"comment": "",
					"isStatic": false,
					"isConstant": true,
					"sid": 150770767304878
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 592311739487459,
							"parameters": {
								"key": 87
							}
						}
					],
					"actions": [
						{
							"id": "add-to-instvar",
							"objectClass": "obj_camera",
							"sid": 533175759503973,
							"parameters": {
								"instance-variable": "world_z",
								"value": "CAMERA_SPEED * dt"
							}
						}
					],
					"sid": 526547194599683
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 126142958516589,
							"parameters": {
								"key": 83
							}
						}
					],
					"actions": [
						{
							"id": "subtract-from-instvar",
							"objectClass": "obj_camera",
							"sid": 339549248192649,
							"parameters": {
								"instance-variable": "world_z",
								"value": "CAMERA_SPEED * dt"
							}
						}
					],
					"sid": 553827207111119
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 354892189813178,
							"parameters": {
								"key": 68
							}
						}
					],
					"actions": [
						{
							"id": "add-to-instvar",
							"objectClass": "obj_camera",
							"sid": 158324666112108,
							"parameters": {
								"instance-variable": "world_x",
								"value": "CAMERA_SPEED * dt"
							}
						}
					],
					"sid": 380655103665218
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 815227120334585,
							"parameters": {
								"key": 65
							}
						}
					],
					"actions": [
						{
							"id": "subtract-from-instvar",
							"objectClass": "obj_camera",
							"sid": 323406866809788,
							"parameters": {
								"instance-variable": "world_x",
								"value": "CAMERA_SPEED * dt"
							}
						}
					],
					"sid": 765454483997392
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 928743898426217,
							"parameters": {
								"key": 69
							}
						}
					],
					"actions": [
						{
							"id": "add-to-instvar",
							"objectClass": "obj_camera",
							"sid": 111455815081810,
							"parameters": {
								"instance-variable": "world_y",
								"value": "CAMERA_SPEED * dt"
							}
						}
					],
					"sid": 622285307582507
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 733601573212511,
							"parameters": {
								"key": 81
							}
						}
					],
					"actions": [
						{
							"id": "subtract-from-instvar",
							"objectClass": "obj_camera",
							"sid": 862186109184640,
							"parameters": {
								"instance-variable": "world_y",
								"value": "CAMERA_SPEED * dt"
							}
						}
					],
					"sid": 275631224186316
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "else",
					"objectClass": "System",
					"sid": 301314139051838
				}
			],
			"actions": [
				{
					"id": "set-instvar-value",
					"objectClass": "obj_camera",
					"sid": 936384733765268,
					"parameters": {
						"instance-variable": "world_z",
						"value": "spr_player.world_z - spr_player.follow_distance"
					}
				}
			],
			"sid": 497240107865843
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "every-tick",
					"objectClass": "System",
					"sid": 888457865567616
				}
			],
			"actions": [
				{
					"id": "add-to-instvar",
					"objectClass": "spr_player",
					"sid": 439054052754779,
					"parameters": {
						"instance-variable": "world_x",
						"value": "Self.speed_x * dt"
					}
				},
				{
					"id": "add-to-instvar",
					"objectClass": "spr_player",
					"sid": 782547196199066,
					"parameters": {
						"instance-variable": "world_z",
						"value": "Self.speed_z * dt"
					}
				}
			],
			"sid": 411391026962897
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "mouse-button-is-down",
					"objectClass": "Mouse",
					"sid": 873629699743538,
					"parameters": {
						"mouse-button": "left"
					}
				}
			],
			"actions": [
				{
					"id": "set-instvar-value",
					"objectClass": "spr_player",
					"sid": 682066457127298,
					"parameters": {
						"instance-variable": "speed_x",
						"value": "clamp(Self.speed_x - Self.acceleration_x * dt, -Self.max_speed_x, Self.max_speed_x)"
					}
				}
			],
			"sid": 576788924140949
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "mouse-button-is-down",
					"objectClass": "Mouse",
					"sid": 303801316549976,
					"parameters": {
						"mouse-button": "right"
					}
				}
			],
			"actions": [
				{
					"id": "set-instvar-value",
					"objectClass": "spr_player",
					"sid": 995445064928004,
					"parameters": {
						"instance-variable": "speed_x",
						"value": "clamp(Self.speed_x + Self.acceleration_x * dt, -Self.max_speed_x, Self.max_speed_x)"
					}
				}
			],
			"sid": 728807794174551
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "mouse-button-is-down",
					"objectClass": "Mouse",
					"sid": 514648039012574,
					"parameters": {
						"mouse-button": "left"
					},
					"isInverted": true
				},
				{
					"id": "mouse-button-is-down",
					"objectClass": "Mouse",
					"sid": 221704144695338,
					"parameters": {
						"mouse-button": "right"
					},
					"isInverted": true
				}
			],
			"actions": [],
			"sid": 681251529134335,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "spr_player",
							"sid": 501432578980444,
							"parameters": {
								"instance-variable": "speed_x",
								"comparison": 2,
								"value": "0"
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "spr_player",
							"sid": 478069558024218,
							"parameters": {
								"instance-variable": "speed_x",
								"value": "clamp(Self.speed_x + Self.deacceleration_x * dt, -Infinity, 0)"
							}
						}
					],
					"sid": 623467186217010
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "spr_player",
							"sid": 657762246821673,
							"parameters": {
								"instance-variable": "speed_x",
								"comparison": 4,
								"value": "0"
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "spr_player",
							"sid": 188176021532237,
							"parameters": {
								"instance-variable": "speed_x",
								"value": "clamp(Self.speed_x - Self.deacceleration_x * dt, 0, Infinity)"
							}
						}
					],
					"sid": 770895154839183
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-mouse-wheel",
					"objectClass": "Mouse",
					"sid": 506058459577989,
					"parameters": {
						"direction": "up"
					}
				}
			],
			"actions": [
				{
					"id": "set-instvar-value",
					"objectClass": "spr_player",
					"sid": 899718949050849,
					"parameters": {
						"instance-variable": "speed_z",
						"value": "clamp(Self.speed_z + Self.acceleration_z, Self.min_speed_z, Self.max_speed_z)"
					}
				}
			],
			"sid": 374536411638754
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-mouse-wheel",
					"objectClass": "Mouse",
					"sid": 490403668012977,
					"parameters": {
						"direction": "down"
					}
				}
			],
			"actions": [
				{
					"id": "set-instvar-value",
					"objectClass": "spr_player",
					"sid": 860591465236428,
					"parameters": {
						"instance-variable": "speed_z",
						"value": "clamp(Self.speed_z - Self.acceleration_z, Self.min_speed_z, Self.max_speed_z)"
					}
				}
			],
			"sid": 602202858608146
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "for-each-ordered",
					"objectClass": "System",
					"sid": 685156925284882,
					"parameters": {
						"object": "Renderable",
						"expression": "Renderable.world_z",
						"order": "ascending"
					}
				}
			],
			"actions": [],
			"sid": 616918059583174,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "Renderable",
							"sid": 234427139034749,
							"parameters": {
								"instance-variable": "world_z",
								"comparison": 4,
								"value": "obj_camera.world_z"
							}
						}
					],
					"actions": [
						{
							"id": "call-function",
							"objectClass": "Function",
							"sid": 130024113691302,
							"parameters": {
								"name": "\"project\"",
								"parameter-n": [
									"Renderable.UID"
								]
							}
						},
						{
							"id": "set-position",
							"objectClass": "Renderable",
							"sid": 315983382899467,
							"parameters": {
								"x": "Self.screen_x",
								"y": "Self.screen_y"
							}
						},
						{
							"id": "set-scale",
							"objectClass": "Renderable",
							"sid": 372920312797270,
							"parameters": {
								"scale": "Self.scale"
							}
						},
						{
							"id": "move-to-bottom",
							"objectClass": "Renderable",
							"sid": 906885982973108
						}
					],
					"sid": 765125496532834
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 665362808570486
						}
					],
					"actions": [
						{
							"id": "set-scale",
							"objectClass": "Renderable",
							"sid": 978522990684175,
							"parameters": {
								"scale": "0"
							}
						}
					],
					"sid": 246116879397167
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-function",
					"objectClass": "Function",
					"sid": 603822158744243,
					"parameters": {
						"name": "\"project\""
					}
				}
			],
			"actions": [],
			"sid": 921285995606594,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "Renderable",
							"sid": 266713862350580,
							"parameters": {
								"unique-id": "Function.Param(0)"
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "Renderable",
							"sid": 481874363024580,
							"parameters": {
								"instance-variable": "transformed_x",
								"value": "Self.world_x - obj_camera.world_x"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Renderable",
							"sid": 269504904312402,
							"parameters": {
								"instance-variable": "transformed_y",
								"value": "Self.world_y - obj_camera.world_y"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Renderable",
							"sid": 737726135732432,
							"parameters": {
								"instance-variable": "transformed_z",
								"value": "Self.world_z - obj_camera.world_z"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Renderable",
							"sid": 770064642614234,
							"parameters": {
								"instance-variable": "scale",
								"value": "obj_camera.depth / Self.transformed_z"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Renderable",
							"sid": 228231571845610,
							"parameters": {
								"instance-variable": "screen_x",
								"value": "LayoutWidth / 2 + Self.transformed_x * Self.scale"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Renderable",
							"sid": 357985010295851,
							"parameters": {
								"instance-variable": "screen_y",
								"value": "LayoutHeight / 2 + Self.transformed_y * Self.scale"
							}
						}
					],
					"sid": 890185914054629
				}
			]
		}
	],
	"sid": 160995284179888
}